---
layout: post
title: mongodb 3.4安装
category : mongo
tagline: "Supporting tagline"
tags : [mongo]
---
{% include JB/setup %}
# mongodb 3.4安装
---

**1.下载包**

<a href='https://www.mongodb.com/download-center?jmp=nav#enterprise' target='_blank'>MongoDB Enterprise Server</a>

<!--break-->

**2.安装**

```
tar -zxvf mongodb-linux-x86_64-enterprise-ubuntu1604-3.4.0.tgz
sudo mv mongodb-linux-x86_64-enterprise-ubuntu1604-3.4.0 /usr/local/mongodb
```

**4.尝试运行**

```
mkdir /usr/local/mongodb/log/
mkdir /usr/local/mongodb/data/
cd /usr/local/mongodb
./mongod --dbpath=/usr/local/mongodb/data/ --fork
```

如提示libnetsnmpmibs.so.30 not found错误，请安装net-snmp，安装完成后执行

```
echo export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib  >> /etc/profile

```

**5.创建启动脚本**

```
# cp ssh mongodb
# vim mongodb
# cat mongodb

#!/bin/bash
#
# mongod                Start up the MongoDB server daemon
#

#定义命令
CMD=/usr/local/mongodb/bin/mongod
LOGPATH=/usr/local/mongodb/log/mongo.log
DBPATH=/usr/local/mongodb/data/
CONFIGPATH=/etc/mongodb.conf

start()
{
        #fork表示后台运行
        $CMD --dbpath=$DBPATH --logpath=$LOGPATH --logappend --maxConns=100 --fork
        echo "MongoDB is running background..."
}

stop()
{
        pkill mongod
        echo "MongoDB is stopped."
}

case "$1" in
        start)
                start
                ;;
        stop)
                stop
                ;;
        *)
                echo $"Usage: $0 {start|stop}"
esac
```

**5.启动**

```
sudo chomd 775 /etc/init.d/mongodb
/etc/init.d/mongodb start
```